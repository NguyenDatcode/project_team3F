{% extends 'layout/base.html' %}
{% block content %}

<div class="container my-4">

  <h2 class="mb-4 text-primary">
    <i class="bi bi-search"></i> Tìm kiếm hợp đồng thuê
  </h2>

  <!-- Form tìm kiếm -->
  <form id="searchContractForm" class="mb-4" action="{{ url_for('search_contract') }}" method="get">
    <div class="row g-3 align-items-end">

      <div class="col-md-4">
        <label for="maHopDong" class="form-label">Mã hợp đồng</label>
        <input type="text" id="maHopDong" name="maHopDong" class="form-control" placeholder="Nhập mã hợp đồng thuê">
      </div>

      <div class="col-md-4 d-flex align-items-end">
        <button type="submit" class="btn btn-primary w-100">
          <i class="bi bi-search"></i> Tìm kiếm
        </button>
      </div>

    </div>
  </form>

  <!-- Kết quả tìm kiếm -->
  <div id="searchResults" class="mt-4">

    {% if contracts is not none %}
        {% if contracts %}
        <table class="table table-hover align-middle">
          <thead class="table-primary">
            <tr>
              <th scope="col">Mã hợp đồng</th>
              <th scope="col">Tên người thuê</th>
              <th scope="col">Ngày bắt đầu</th>
              <th scope="col">Xem chi tiết</th>
            </tr>
          </thead>
          <tbody>
            {% for contract in contracts %}
            <tr>
              <td>{{ contract.maHopDong }}</td>
              <td>{{ contract.tenant_name }}</td>
              <td>{{ contract.ngayBatDau.strftime('%d/%m/%Y') }}</td>
              <td>
                <a href="{{ url_for('view_contract', contract_id=contract.id) }}" class="btn btn-sm btn-info">
                  Xem
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% else %}
        <div class="alert alert-warning" role="alert">
          Không có hợp đồng nào khớp!
        </div>
        {% endif %}
    {% endif %}

  </div>

</div>

{% endblock %}